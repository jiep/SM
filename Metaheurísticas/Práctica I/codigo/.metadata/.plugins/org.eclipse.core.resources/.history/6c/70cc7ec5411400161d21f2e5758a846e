package es.urjc.phub;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.Scanner;
import java.util.Vector;

public class PHub {
	
	static InstanciaPHub leerInstancia2(String filepath){
		try{
			int x_1, x_2, h;
            Scanner scanner = new Scanner(new File(filepath));
            
            /*
             * Leemos la primera línea
             */
            String linea1 = scanner.nextLine(); 
                        
            String datos[] = linea1.split(" ");

            /*
             *  Comenzamos a leer los datos desde el elemento 1, puesto que
             *  cada línea comienza con un espacio
             */
            int nodos = Integer.parseInt(datos[1]);
            int servidores = Integer.parseInt(datos[2]);
            int capacidad = Integer.parseInt(datos[3]);
            
            /*
             * Creamos el vector de demanda
             */
            int demanda[] = new int[nodos];
            
            /*
             * Matriz de vectores para guardar la 
             * posición (x,y) de cada nodo
             */
            Vector<Double>[] posiciones = new Vector[nodos];
            
            for(int i = 0; i < nodos; i++){
            	
            	 Vector<Double> posicion = new Vector<>(2);
            	 int num_nodo = scanner.nextInt();
            	 double pos_x = scanner.nextDouble();
            	 double pos_y = scanner.nextDouble();
            	 
                 posicion.add(pos_x);
                 posicion.add(pos_y);
                 posiciones[i] = posicion;
                 demanda[i] = scanner.nextInt();
                 
                 System.out.println("Posición: (" +(pos_x) + "," + pos_y + ")");
                 System.out.println("Demanda: " + demanda[i]);
              
            	
            	
            }
        }catch(IOException e){
        	System.out.println("No se pudo leer el archivo correctamente.");
        }
	}
	
	static InstanciaPHub leerInstancia(String filepath) throws IOException{
		BufferedReader br = new BufferedReader (new FileReader (filepath));
		 
        // Leemos la primera línea del fichero
        String linea1 = br.readLine();
        System.out.println(linea1);
        String datos[] = linea1.split(" ");
        
        /*
         *  Comenzamos a leer los datos desde el elemento 1, puesto que
         *  cada línea comienza con un espacio
         */
        int nodos = Integer.parseInt(datos[1]);
        int servidores = Integer.parseInt(datos[2]);
        int capacidad = Integer.parseInt(datos[3]);
        
        /*
         * Creamos el vector de demanda
         */
        int demanda[] = new int[nodos];
        
        /*
         * Matriz de vectores para guardar la 
         * posición (x,y) de cada nodo
         */
        Vector<Double>[] posiciones = new Vector[nodos];

        
        // Leemos las siguientes líneas
        String linea;
        int cont = 0;
        while((linea = br.readLine()) != null){
            System.out.println(linea);
            String datos_linea[] = linea1.split(" ");
            Vector<Double> posicion = new Vector<>(2);
            posicion.add(Double.parseDouble(datos_linea[2]));
            posicion.add(Double.parseDouble(datos_linea[3]));
            posiciones[cont] = posicion;
            demanda[cont] = Integer.parseInt(datos_linea[4]);
            
            System.out.println("Posición: (" + Double.parseDouble(datos_linea[2]) + "," + Double.parseDouble(datos_linea[3] + ")"));
            //System.out.println("Demanda: " + Double.parseDouble(datos_linea[4]));
            cont++;
            
        }
   
        br.close();
        

        return null;
		//return new InstanciaPHub(nodos, servidores, distancia, demanda, capacidad);

    }
	

	public static void main(String[] args) {
		try {
			leerInstancia("instancias/phub_50_5_1.txt");
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

}
